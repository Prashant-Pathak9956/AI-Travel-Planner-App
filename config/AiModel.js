const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate a travel plan for the location: Málaga, Spain for 6 Days and 5 Night for A Couple with a Moderate budget. The travel plan should include flight details with options, prices, and booking URLs. Provide hotel options with the hotel name, address, image URL, geo-coordinates, rating, and description. Include places to visit nearby with the place name, details, image URL, geo-coordinates, ticket pricing, and the time required to travel to each location. Create a daily itinerary with a plan for each day and the best times to visit each location. Provide the travel plan in JSON format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"travel_plan\": {\n    \"destination\": \"Málaga, Spain\",\n    \"duration\": \"6 days, 5 nights\",\n    \"budget\": \"Moderate\",\n    \"travelers\": \"Couple\",\n    \"flights\": [\n      {\n        \"option\": \"Non-stop flight from New York (JFK) to Málaga (AGP) with Iberia\",\n        \"price\": \"$600-$800 per person (round trip)\",\n        \"booking_url\": \"https://www.google.com/flights\"\n      },\n      {\n        \"option\": \"Flight with one layover from London (LHR) to Málaga (AGP) with British Airways\",\n        \"price\": \"$400-$600 per person (round trip)\",\n        \"booking_url\": \"https://www.google.com/flights\"\n      }\n    ],\n    \"hotels\": [\n      {\n        \"name\": \"Hotel Molina Lario\",\n        \"address\": \"Calle Molina Lario, 2, 29001 Málaga, Spain\",\n        \"image_url\": \"https://www.booking.com/hotel/es/molina-lario.en-gb.html\",\n        \"geo_coordinates\": \"36.720697, -4.421885\",\n        \"rating\": \"4.5 stars\",\n        \"description\": \"A stylish hotel located in the heart of Málaga, near the main shopping street and the port.\"\n      },\n      {\n        \"name\": \"AC Hotel Málaga Palacio\",\n        \"address\": \"Avenida de Cervantes, 2, 29016 Málaga, Spain\",\n        \"image_url\": \"https://www.marriott.com/hotels/travel/agpmc-ac-hotel-malaga-palacio/\",\n        \"geo_coordinates\": \"36.717995, -4.424408\",\n        \"rating\": \"4 stars\",\n        \"description\": \"A modern hotel with rooftop pool and bar, offering stunning views of the city and the Mediterranean Sea.\"\n      }\n    ],\n    \"daily_itinerary\": [\n      {\n        \"day\": \"Day 1: Arrival and City Center Exploration\",\n        \"activities\": [\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Málaga Airport (AGP)\",\n            \"details\": \"Arrive at Málaga Airport, collect your luggage, and take a taxi or the airport bus to your hotel.\",\n            \"image_url\": \"https://www.aena.es/es/aeropuertos/malaga.html\",\n            \"geo_coordinates\": \"36.723677, -4.482281\"\n          },\n          {\n            \"time\": \"11:00 AM\",\n            \"location\": \"Hotel Check-in\",\n            \"details\": \"Check-in to your hotel and drop off your bags.\",\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at Mercado Central de Atarazanas\",\n            \"details\": \"Enjoy a delicious and authentic lunch at the central market, known for its fresh seafood and local produce.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957220-Reviews-Mercado_Central_de_Atarazanas-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.718611, -4.426734\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Alcazaba\",\n            \"details\": \"Explore this Moorish fortress, offering stunning views over the city.\",\n            \"image_url\": \"https://www.andalucia.org/en/monument/alcazaba-malaga/\",\n            \"geo_coordinates\": \"36.719031, -4.420302\",\n            \"ticket_pricing\": \"€9 per person\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"location\": \"Roman Theatre\",\n            \"details\": \"Visit the well-preserved Roman Theatre, a testament to Málaga's rich history.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957179-Reviews-Roman_Theatre-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.718132, -4.421052\"\n          },\n          {\n            \"time\": \"5:00 PM\",\n            \"location\": \"Gibralfaro\",\n            \"details\": \"Take a cable car up to Gibralfaro, a hilltop fortress offering panoramic views of Málaga and the Mediterranean Sea.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957188-Reviews-Castillo_de_Gibralfaro-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.722218, -4.417217\",\n            \"ticket_pricing\": \"€4 per person\"\n          },\n          {\n            \"time\": \"7:00 PM\",\n            \"location\": \"Dinner at El Pimpi\",\n            \"details\": \"Enjoy a traditional Andalusian dinner at this historic restaurant, known for its flamenco shows and delicious food.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d873767-Reviews-El_Pimpi-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.718046, -4.422113\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 2: Picasso Museum and Beach Time\",\n        \"activities\": [\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Museo Picasso Málaga\",\n            \"details\": \"Explore the life and works of Pablo Picasso at this museum, featuring a vast collection of his paintings and sculptures.\",\n            \"image_url\": \"https://www.museopicassomalaga.org/\",\n            \"geo_coordinates\": \"36.718173, -4.426220\",\n            \"ticket_pricing\": \"€10 per person\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at La Taberna del Gourmet\",\n            \"details\": \"Enjoy a delicious lunch at this restaurant, known for its tapas and seafood dishes.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d1015139-Reviews-La_Taberna_del_Gourmet-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.718782, -4.424013\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Playa de la Malagueta\",\n            \"details\": \"Relax and enjoy the sun and sand at this popular beach.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957232-Reviews-Playa_de_la_Malagueta-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.715238, -4.429893\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"location\": \"Malaga Promenade\",\n            \"details\": \"Take a leisurely stroll along the promenade, enjoying the sea breeze and the beautiful views.\",\n          },\n          {\n            \"time\": \"6:00 PM\",\n            \"location\": \"Dinner at Restaurante La Tranquila\",\n            \"details\": \"Dine at this restaurant with a charming atmosphere and a menu featuring fresh seafood and traditional Spanish dishes.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d1023389-Reviews-Restaurante_La_Tranquila-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.717404, -4.424237\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 3: Day Trip to Nerja\",\n        \"activities\": [\n          {\n            \"time\": \"9:00 AM\",\n            \"location\": \"Nerja\",\n            \"details\": \"Take a train or bus to Nerja, a charming coastal town known for its beautiful beaches and caves.\",\n            \"image_url\": \"https://www.andalucia.org/en/destination/nerja/\",\n            \"geo_coordinates\": \"36.753944, -4.001833\",\n            \"travel_time\": \"1 hour\"\n          },\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Nerja Caves\",\n            \"details\": \"Explore the impressive Nerja Caves, a natural wonder with stunning stalactites and stalagmites.\",\n            \"image_url\": \"https://cuevasdenerja.es/\",\n            \"geo_coordinates\": \"36.761418, -4.007172\",\n            \"ticket_pricing\": \"€14 per person\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at Restaurante El Chiringuito\",\n            \"details\": \"Enjoy a delicious lunch with stunning views of the Mediterranean Sea at this beachside restaurant.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187514-d1054576-Reviews-Restaurante_El_Chiringuito-Nerja_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.755514, -4.000425\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Balcón de Europa\",\n            \"details\": \"Walk along the Balcón de Europa, a clifftop promenade offering breathtaking views of the coastline.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187514-d1957290-Reviews-Balcon_de_Europa-Nerja_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.755546, -4.000771\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"location\": \"Playa de Burriana\",\n            \"details\": \"Relax and enjoy the beach at Playa de Burriana, one of Nerja's most popular beaches.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187514-d1957288-Reviews-Playa_de_Burriana-Nerja_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.752044, -3.996097\"\n          },\n          {\n            \"time\": \"6:00 PM\",\n            \"location\": \"Dinner at Restaurante Ayo\",\n            \"details\": \"Dine at this restaurant, known for its fresh seafood and traditional Spanish dishes.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187514-d1054447-Reviews-Restaurante_Ayo-Nerja_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.754513, -3.999945\"\n          },\n          {\n            \"time\": \"8:00 PM\",\n            \"location\": \"Return to Málaga\",\n            \"details\": \"Take a train or bus back to Málaga.\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 4: Wine and Culture\",\n        \"activities\": [\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Bodega Antigua\",\n            \"details\": \"Visit this historic winery, offering guided tours and wine tastings of their delicious local wines.\",\n            \"image_url\": \"https://www.bodegaantigua.com/\",\n            \"geo_coordinates\": \"36.721019, -4.426285\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at La Taberna del Volapié\",\n            \"details\": \"Enjoy a delicious lunch at this tapas bar, known for its traditional Spanish dishes and local wines.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d1015159-Reviews-La_Taberna_del_Volapie-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.717617, -4.424023\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Centre Pompidou Málaga\",\n            \"details\": \"Visit this contemporary art museum, featuring a unique collection of modern and contemporary art.\",\n            \"image_url\": \"https://www.centrepompidou-malaga.es/\",\n            \"geo_coordinates\": \"36.717228, -4.421936\",\n            \"ticket_pricing\": \"€8 per person\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"location\": \"Carmen Thyssen Museum\",\n            \"details\": \"Explore this museum featuring a collection of 19th-century Spanish and European paintings.\",\n            \"image_url\": \"https://www.museothyssen.org/en/\",\n            \"geo_coordinates\": \"36.719524, -4.420112\",\n            \"ticket_pricing\": \"€10 per person\"\n          },\n          {\n            \"time\": \"6:00 PM\",\n            \"location\": \"Dinner at El Mesón de Cervantes\",\n            \"details\": \"Dine at this restaurant, offering a romantic ambiance and a menu of traditional Spanish cuisine.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d876790-Reviews-El_Meson_de_Cervantes-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.717946, -4.424474\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 5: Exploring the Coast and Relaxing\",\n        \"activities\": [\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Pedregalejo\",\n            \"details\": \"Visit this charming coastal district, known for its seafood restaurants and relaxed atmosphere.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957261-Reviews-Pedregalejo-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.726678, -4.442087\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at Restaurante El Palo\",\n            \"details\": \"Enjoy a delicious lunch at this seafood restaurant, famous for its fresh catches.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d878934-Reviews-Restaurante_El_Palo-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.723372, -4.443117\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Playa El Palo\",\n            \"details\": \"Relax and soak up the sun at this beautiful beach.\",\n            \"image_url\": \"https://www.tripadvisor.com/Attraction_Review-g187442-d1957257-Reviews-Playa_de_El_Palo-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.723267, -4.443354\"\n          },\n          {\n            \"time\": \"4:00 PM\",\n            \"location\": \"Paseo Marítimo Pablo Ruiz Picasso\",\n            \"details\": \"Take a leisurely walk along this promenade, enjoying the sea views and the lively atmosphere.\",\n          },\n          {\n            \"time\": \"6:00 PM\",\n            \"location\": \"Dinner at Restaurante El Candil\",\n            \"details\": \"Enjoy a romantic dinner at this restaurant, known for its exquisite seafood and traditional Spanish dishes.\",\n            \"image_url\": \"https://www.tripadvisor.com/Restaurant_Review-g187442-d873619-Reviews-El_Candil-Malaga_Province_of_Malaga_Andalusia.html\",\n            \"geo_coordinates\": \"36.722346, -4.428130\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 6: Departure\",\n        \"activities\": [\n          {\n            \"time\": \"9:00 AM\",\n            \"location\": \"Hotel Check-out\",\n            \"details\": \"Check out of your hotel and leave your luggage in storage if needed.\"\n          },\n          {\n            \"time\": \"10:00 AM\",\n            \"location\": \"Last-minute shopping or souvenir browsing\",\n            \"details\": \"Enjoy some last-minute shopping at local markets or souvenir shops.\"\n          },\n          {\n            \"time\": \"12:00 PM\",\n            \"location\": \"Lunch at a local café\",\n            \"details\": \"Have a quick lunch at a local café.\"\n          },\n          {\n            \"time\": \"2:00 PM\",\n            \"location\": \"Málaga Airport (AGP)\",\n            \"details\": \"Take a taxi or the airport bus to Málaga Airport for your flight home.\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Please note:** This travel plan is a suggestion and can be customized to your preferences. The prices mentioned are approximate and can vary depending on the season and availability. \n\n**For booking flights:**\n\n* **Google Flights:**  [https://www.google.com/flights](https://www.google.com/flights)\n* **Skyscanner:** [https://www.skyscanner.com/](https://www.skyscanner.com/)\n* **Kayak:** [https://www.kayak.com/](https://www.kayak.com/)\n\n**For booking hotels:**\n\n* **Booking.com:** [https://www.booking.com/](https://www.booking.com/)\n* **Expedia:** [https://www.expedia.com/](https://www.expedia.com/)\n* **Hotels.com:** [https://www.hotels.com/](https://www.hotels.com/)\n\n**For booking activities and tours:**\n\n* **GetYourGuide:** [https://www.getyourguide.com/](https://www.getyourguide.com/)\n* **Viator:** [https://www.viator.com/](https://www.viator.com/)\n\n**For more information on Málaga:**\n\n* **Málaga Tourism:** [https://www.malagaturismo.com/en/](https://www.malagaturismo.com/en/)\n* **TripAdvisor:** [https://www.tripadvisor.com/Tourism-g187442-Malaga_Province_of_Malaga_Andalusia-Vacations.html](https://www.tripadvisor.com/Tourism-g187442-Malaga_Province_of_Malaga_Andalusia-Vacations.html) \n"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());

  
